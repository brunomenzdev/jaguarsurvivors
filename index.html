<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jaguar Survivors - MVP Fase 1</title>

    <link href="https://fonts.googleapis.com/css2?family=Anton&family=Roboto:wght@400;700&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="styles.css">

    <script src="https://cdnjs.cloudflare.com/ajax/libs/phaser/3.70.0/phaser.min.js"></script>
</head>

<body>
    <div id="game-wrapper">
        <div id="main-menu" class="overlay-screen active">
            <div class="menu-background-effect"></div>

            <div class="menu-content-wrapper">
                <div class="menu-left-panel">
                    <div class="logo-wrapper">
                        <img src="src/assets/images/logo_small.png" alt="Jaguar Survivors" class="main-logo">
                    </div>

                    <div class="menu-nav">
                        <button class="btn btn-premium" onclick="GameEvents.goToCharSelect()">
                            <span class="btn-shine"></span>
                            <span class="btn-label">INICIAR MISS√ÉO</span>
                        </button>
                        <button class="btn btn-premium secondary" onclick="GameEvents.goToShop()">
                            <span class="btn-label">LOJA & UPGRADES</span>
                        </button>
                        <button class="btn btn-premium secondary" onclick="GameEvents.goToSettings()">
                            <span class="btn-label">AJUSTES</span>
                        </button>
                    </div>
                </div>

                <div class="menu-right-panel">
                    <div class="controls-summary">
                        <h3 class="controls-title">CONTROLES</h3>
                        <div class="controls-grid">
                            <div class="control-group">
                                <div class="key-layout">
                                    <div class="key">W</div>
                                    <div class="key-row">
                                        <div class="key">A</div>
                                        <div class="key">S</div>
                                        <div class="key">D</div>
                                    </div>
                                </div>
                                <span class="control-label">MOVIMENTO</span>
                            </div>

                            <div class="control-separator"></div>

                            <div class="control-group">
                                <div class="key-layout">
                                    <div class="key-double-tap">
                                        <div class="key-tap animate-tap">W</div>
                                        <div class="key-tap animate-tap2">W</div>
                                    </div>
                                </div>
                                <span class="control-label">DASH (TAP DUPLO)</span>
                            </div>
                        </div>
                        <div class="controls-footer">
                            Tamb√©m suporta as Setas do teclado
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div id="meta-shop" class="overlay-screen">
            <h1>LOJA DE SUPRIMENTOS</h1>
            <div id="shop-header">
                <span id="shop-coins-display">Moedas: 0</span>
            </div>

            <div id="shop-container">
                <!-- Shop items injected via JS -->
            </div>

            <button class="btn" style="margin-top: 20px; background: #555;"
                onclick="GameEvents.goToMainMenu()">Voltar</button>
        </div>

        <div id="settings-menu" class="overlay-screen">
            <h1>CONFIGURA√á√ïES</h1>

            <div class="settings-rows">
                <div class="setting-row">
                    <label>Volume Principal</label>
                    <input type="range" id="setting-volume" min="0" max="100" value="100"
                        onchange="GameEvents.setVolume(this.value)">
                </div>
                <div class="setting-row">
                    <label>Tremor de Tela</label>
                    <input type="checkbox" id="setting-shake" onchange="GameEvents.toggleShake()" checked>
                </div>
            </div>

            <button class="btn" style="margin-top: 20px; background: #555;"
                onclick="GameEvents.goToMainMenu()">Voltar</button>
        </div>

        <div id="char-select" class="overlay-screen">
            <h1>QUEM VAI LIDERAR?</h1>
            <div id="char-container">
            </div>
            <button class="btn" style="margin-top: 20px; background: #555;"
                onclick="GameEvents.goToMainMenu()">Voltar</button>
        </div>

        <div id="weapon-select" class="overlay-screen">
            <h1>ARSENAL DE COMBATE</h1>
            <div class="weapon-selection-layout">
                <div id="weapon-list-pane">
                    <div id="weapon-container">
                    </div>
                </div>
                <div id="weapon-detail-pane">
                    <!-- Detalhes da arma selecionada -->
                </div>
            </div>
            <div class="selection-footer">
                <button class="btn" style="background: #333; font-size: 18px; padding: 15px 40px;"
                    onclick="GameEvents.goToCharSelect()">VOLTAR</button>
            </div>
        </div>

        <div id="map-select" class="overlay-screen">
            <h1>ONDE SER√Å A BATALHA?</h1>
            <div id="map-container">
                <!-- Map cards injected via JS -->
            </div>
            <button class="btn" style="margin-top: 20px; background: #555;"
                onclick="GameEvents.goToCharSelect()">Voltar</button>
        </div>

        <div id="game-over" class="overlay-screen">
            <h1 style="color: var(--cor-perigo);">MISS√ÉO FALHOU</h1>

            <!-- Overall Stats -->
            <div class="stat-group">
                <h2>TEMPO TOTAL: <span id="survival-time" style="color: #fff">00:00</span></h2>
                <div class="stat-line">INIMIGOS DERROTADOS: <span id="enemies-defeated">0</span></div>
                <div class="stat-line">N√çVEL ALCAN√áADO: <span id="final-level"
                        style="color: var(--cor-primaria)">1</span></div>
            </div>

            <!-- Endless Mode Stats (Hidden by default) -->
            <div id="endless-mode-stats" class="stat-group"
                style="display: none; margin-top: 25px; border-top: 2px solid #555; padding-top: 15px;">
                <h2 style="color: var(--cor-destaque);">MODO ENDLESS ALCAN√áADO</h2>
                <div class="stat-line">TEMPO EM ENDLESS: <span id="endless-survival-time">00:00</span></div>
            </div>

            <div class="button-group" style="margin-top: 30px;">
                <button class="btn" onclick="GameEvents.goToCharSelect()">TENTAR NOVAMENTE</button>
                <button class="btn" style="background: #333;" onclick="GameEvents.goToMainMenu()">MENU</button>
            </div>
        </div>

        <div id="map-completed" class="overlay-screen">
            <h1 style="color: var(--cor-primaria);">MAPA CONCLU√çDO</h1>
            <h2>TEMPO: <span id="final-survival-time" style="color: #fff">00:00</span></h2>
            <div style="font-size: 18px; margin-bottom: 20px; color: #aaa; font-family: 'Anton', sans-serif;">
                N√çVEL ALCAN√áADO: <span id="final-level-completed" style="color: var(--cor-primaria)">1</span>
            </div>
            <button class="btn" id="start-endless-mode">INICIAR MODO ENDLESS</button>
            <button class="btn" style="background: #333;" onclick="GameEvents.goToMainMenu()">MENU</button>
        </div>

        <div id="pause-screen" class="overlay-screen">
            <h1>MISSAO PAUSADA</h1>
            <button class="btn" onclick="GameEvents.resumeGame()">CONTINUAR</button>
            <button class="btn" style="background: #555;" onclick="GameEvents.goToMainMenu()">SAIR DA MISS√ÉO</button>
        </div>

        <div id="upgrade-screen" class="overlay-screen">
            <div
                style="font-size: 56px; color: var(--cor-primaria); font-family: 'Anton', sans-serif; margin-bottom: 20px; text-shadow: 2px 2px 0 #000;">
                NOVO RECURSO!</div>
            <div style="font-size: 20px; color: #fff; margin-bottom: 40px;">Escolha um refor√ßo para a miss√£o:</div>
            <div id="upgrade-options"></div>
        </div>

        <div id="game-ui" style="display: none;">
            <div id="game-timer">00:00</div>

            <!-- Standard UI (Waves) -->
            <div id="standard-ui">
                <div id="wave-info">
                    <div class="info-item" id="wave-display">
                        <div class="icon-box">üåä</div>
                        <span>ONDA <span id="wave-count">1</span></span>
                    </div>
                    <div class="info-item" id="enemies-display">
                        <div class="icon-box">üëæ</div>
                        <span id="enemy-count">0</span>
                    </div>
                    <div class="info-item" id="kills-display">
                        <div class="icon-box">üíÄ</div>
                        <span id="kill-count">0</span>
                    </div>
                </div>
            </div>

            <!-- Endless UI (Premium) -->
            <div id="endless-ui" style="display: none;">
                <div id="endless-stats">
                    <div class="endless-item skull-counter">
                        <span class="label">ELIMINA√á√ïES</span>
                        <div class="value-container">
                            <span class="icon">üíÄ</span>
                            <span id="endless-kill-count" class="value">0</span>
                        </div>
                    </div>
                    <div class="endless-item danger-level">
                        <span class="label">N√çVEL DE PERIGO</span>
                        <div class="value-container">
                            <span class="icon">üëë</span>
                            <span id="endless-danger-value" class="value">CR√çTICO</span>
                        </div>
                    </div>
                </div>
            </div>

            <div id="health-bar-container">
                <div id="health-bar-bg">
                    <div id="health-bar-fill"></div>
                    <div id="health-text">100/100</div>
                </div>
            </div>

            <div id="xp-bar-container">
                <div id="xp-bar-text">N√çVEL 1</div>
                <div id="xp-bar-bg">
                    <div id="xp-bar-fill"></div>
                </div>
            </div>

            <div id="damage-indicator">üí•!</div>
        </div>

        <div id="game-container"></div>
    </div>

    <script type="module" src="src/main.js"></script>
</body>

</html>